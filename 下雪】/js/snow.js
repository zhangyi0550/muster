(function(){function m(f,g,h){if(f.addEventListener){f.addEventListener(g,h,false)}else{f.attachEvent&&f.attachEvent("on"+g,h)}}function b(f){if(typeof window.onload!="function"){window.onload=f}else{var g=window.onload;window.onload=function(){g();f()}}}function c(){var f={};for(type in {Top:"",Left:""}){var g=type=="Top"?"Y":"X";if(typeof window["page"+g+"Offset"]!="undefined"){f[type.toLowerCase()]=window["page"+g+"Offset"]}else{g=document.documentElement.clientHeight?document.documentElement:document.body;f[type.toLowerCase()]=g["scroll"+type]}}return f}function n(){var f=document.body,g;if(window.innerHeight){g=window.innerHeight}else{if(f.parentElement.clientHeight){g=f.parentElement.clientHeight}else{if(f&&f.clientHeight){g=f.clientHeight}}}return g}function d(f){this.parent=document.body;this.createEl(this.parent,f);this.size=Math.random()*5+5;this.el.style.width=Math.round(this.size)+"px";this.el.style.height=Math.round(this.size)+"px";this.maxLeft=document.body.offsetWidth-this.size;this.maxTop=document.body.offsetHeight-this.size;this.left=Math.random()*this.maxLeft;this.top=c().top+1;this.angle=1.4+0.2*Math.random();this.minAngle=1.4;this.maxAngle=1.6;this.angleDelta=0.01*Math.random();this.speed=2+Math.random()}var e=false;b(function(){e=true});var a=true;window.createSnow=function(f,g){if(e){var h=[],i=setInterval(function(){a&&g>h.length&&Math.random()<g*0.0025&&h.push(new d(f));!a&&!h.length&&clearInterval(i);for(var k=c().top,l=n(),j=h.length-1;j>=0;j--){if(h[j]){if(h[j].top>600||h[j].top+h[j].size+1>k+l){h[j].remove();h[j]=null;h.splice(j,1)}else{h[j].move();h[j].draw()}}}},40);m(window,"scroll",function(){for(var j=h.length-1;j>=0;j--){h[j].draw()}})}else{b(function(){createSnow(f,g)})}};window.removeSnow=function(){a=false};d.prototype={createEl:function(f,g){this.el=document.createElement("img");this.el.setAttribute("src",g+"snow"+Math.floor(Math.random()*4)+".gif");this.el.style.position="absolute";this.el.style.display="block";this.el.style.zIndex="99999";this.parent.appendChild(this.el)},move:function(){if(this.angle<this.minAngle||this.angle>this.maxAngle){this.angleDelta=-this.angleDelta}this.angle+=this.angleDelta;this.left+=this.speed*Math.cos(this.angle*Math.PI);this.top-=this.speed*Math.sin(this.angle*Math.PI);if(this.left<0){this.left=this.maxLeft}else{if(this.left>this.maxLeft){this.left=0}}},draw:function(){this.el.style.top=Math.round(this.top)+"px";this.el.style.left=Math.round(this.left)+"px"},remove:function(){this.parent.removeChild(this.el);this.parent=this.el=null}}})();