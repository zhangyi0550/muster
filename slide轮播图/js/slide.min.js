/*
 * @作者 华子yjh http://www.cnblogs.com/yangjunhua/
 * @date 2013/04/23 11:00:00
 * @source 博客园
 */
$.extend({slide:function(container,contentCls,triggerCls,config){var container_box=$(container),content_box=$(contentCls,container),trigger_box=$(triggerCls,container),content_childs=$(contentCls,container).children(),first_CtnElem=$(content_childs.get(0)),trigger_elems=$(triggerCls,container).children(),fixed_steps=first_CtnElem.width(),len=content_childs.length,total_w=fixed_steps*len,left=0,setTimeoutId,defaultConfig={auto:false,delay:4000,interval:4400,duration:400,easing:'swing',activeCls:'slide-active'};config=$.isPlainObject(config)&&config?$.extend(defaultConfig,config)&&defaultConfig:defaultConfig;function autoSlide(){left=parseInt(content_box.get(0).style.left,10);left=left-fixed_steps;var curIndex=Math.abs(left/fixed_steps);if(curIndex<=len-1){$(trigger_elems[curIndex]).addClass(config.activeCls).siblings().removeClass(config.activeCls)}else{$(trigger_elems[0]).addClass(config.activeCls).siblings().removeClass(config.activeCls)}if(Math.abs(left)<total_w){content_box.stop(true,true).animate({left:left+'px'},config.duration,config.easing,function(){if(Math.abs(left)===(total_w-fixed_steps)){first_CtnElem.css({position:'relative',left:total_w+'px'})}})}else{content_box.stop(true,true).animate({left:left+'px'},config.duration,config.easing,function(){$(content_childs.get(0)).css({position:'',left:''});content_box.css({left:0})})}setTimeoutId=setTimeout(autoSlide,config.interval)}content_box.css({width:total_w+'px',position:'absolute',top:0,left:0});if(!!config.auto){setTimeoutId=setTimeout(autoSlide,config.delay)}$(trigger_elems).bind('mouseover',function(e){var curTarget=e.currentTarget,idx=trigger_elems.index(curTarget);left=-(total_w/len)*idx;$(curTarget).addClass(config.activeCls).siblings().removeClass(config.activeCls);content_box.stop(true,true).animate({left:left+'px'},config.duration,config.easing,function(){first_CtnElem.css({position:'',left:''});if(Math.abs(left)===(total_w-fixed_steps)){first_CtnElem.css({position:'relative',left:total_w+'px'})}})});container_box.bind('mouseover',function(e){clearTimeout(setTimeoutId)});container_box.bind('mouseleave',function(e){setTimeoutId=setTimeout(autoSlide,config.interval)});return this}});